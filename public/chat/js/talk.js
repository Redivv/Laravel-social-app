!function(e){var t={};function r(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(a,o,function(t){return e[t]}.bind(null,o));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=40)}({40:function(e,t,r){e.exports=r(41)},41:function(e,t){function r(e){if(0==$(e.currentTarget).scrollTop()&&!1===stop_pagi){pagi++;var t=window.location.href;$.ajax({method:"get",url:t,data:{pagi:pagi}}).done((function(e){"success"==e.status&&""!=e.html&&($("#talkMessages").prepend('<li id="top-msg"></li>'),$("#talkMessages").prepend(e.html),$("div.chat-history").scrollTop($("div.chat-history").scrollTop()+$("#top-msg").position().top-$("div.chat-history").height()/4+$("#top-msg").height()/4),stop_pagi=e.stop)}))}}$(document).ready((function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$("div.chat-history").scrollTop($("div.chat-history").prop("scrollHeight"));var e=new Image;e.src=__baseUrl+"/chat/loading.gif",$("div.chat-history").bind("scroll",r);var t=!1;$("#message-data").keydown((function(e){16==(e.keyCode||e.which)&&(t=!0),13==(e.keyCode||e.which)&&!1===t&&(e.preventDefault(),$("#talkSendMessage").submit())})),$("#message-data").keyup((function(e){16==(e.keyCode||e.which)&&(t=!1)})),$("#talkSendMessage").on("submit",(function(t){var r,a,o;(t.preventDefault(),$("#message-data").val()||$("#upload-pictures").val())?(a=$(this),r=__baseUrl+"/ajax/message/send",$(document).one("ajaxSend",(function(){a[0].reset(),$("#picture-preview").empty();var t='<li class="clearfix" id="to-be-replaced"><img src="'+e.src+'"></li>';$("#talkMessages").append(t),$("div.chat-history").scrollTop($("div.chat-history").prop("scrollHeight"))})),(o=$.ajax({method:"post",url:r,enctype:"multipart/form-data",processData:!1,contentType:!1,data:new FormData(this)})).done((function(e){if("success"==e.status){$("#to-be-replaced").replaceWith(e.html),$("div.chat-history").scrollTop($("div.chat-history").prop("scrollHeight"));$("#user-"+e.receiver_id).length&&($("#user-"+e.receiver_id).hasClass("activeUser")&&"activeUser",$("#user-"+e.receiver_id+"+hr").remove(),$("#user-"+e.receiver_id).remove()),$("#people-list .list").prepend(e.html2),active_id.includes(parseInt(e.receiver_id,10))&&$("#user-"+e.receiver_id).addClass("activeUser"),$(".talkDeleteConversation").on("submit",(function(e){confirm(deleteConvo)||e.preventDefault()})),$(".talkBlockConversation").on("submit",(function(e){confirm(blockConvo)||e.preventDefault()}))}})),o.fail((function(e){"blocked-user"==e.responseJSON.status&&alert(e.responseJSON.msg),$("#to-be-replaced").remove()}))):alert("Nie możesz wysłać pustej wiadomości")})),$("body").on("click",".talkDeleteMessage",(function(e){var t,r,a;if(e.preventDefault(),t=$(this),a=t.data("message-id"),r=__baseUrl+"/ajax/message/delete/"+a,!confirm(deleteMessage))return!1;$.ajax({method:"post",url:r,data:{_method:"DELETE"}}).done((function(e){"success"==e.status&&$("#message-"+a).hide(500,(function(){$(this).remove()}))}))})),$(".talkDeleteConversation").on("submit",(function(e){confirm(deleteConvo)||e.preventDefault()})),$(".talkBlockConversation").on("submit",(function(e){confirm(blockConvo)||e.preventDefault()})),$("#upload-pictures").change((function(e){var t=e.target.files;$("#picture-preview").empty();for(var r,a=0;r=t[a];a++){if(!r.type.match("image.*")){$(this).val(""),alert("Niewłaściwy Typ Pliku!"),$("#picture-preview").empty();break}var o=new FileReader;o.onload=function(e){return function(t){var r=document.createElement("span");r.innerHTML=['<img class="thumb" src="',t.target.result,'" title="',escape(e.name),'"/>'].join(""),$("#picture-preview").prepend(r,null),$("#message-data").focus()}}(r),o.readAsDataURL(r)}}))}))}});