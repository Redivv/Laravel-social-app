!function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o(o.s=40)}({40:function(e,t,o){e.exports=o(41)},41:function(e,t){function o(e){if(0==$(e.currentTarget).scrollTop()&&!1===stop_pagi){pagi++;var t=window.location.href;$.ajax({method:"get",url:t,data:{pagi:pagi}}).done((function(e){"success"==e.status&&""!=e.html&&($("#talkMessages").prepend('<li id="top-msg"></li>'),$("#talkMessages").prepend(e.html),$("div.chat-history").scrollTop($("div.chat-history").scrollTop()+$("#top-msg").position().top-$("div.chat-history").height()/4+$("#top-msg").height()/4),stop_pagi=e.stop)}))}}$(document).ready((function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$("div.chat-history").scrollTop($("div.chat-history").prop("scrollHeight")),$("div.chat-history").bind("scroll",o),$("#talkSendMessage").on("submit",(function(e){var t,o,r,n;e.preventDefault(),o=$(this),t=__baseUrl+"/ajax/message/send",r=o.serialize(),$(document).one("ajaxSend",(function(){o[0].reset();var e=r.split("&")[0];if((e=e.replace("message-data=","")).trim()){var t='<li class="clearfix" id="to-be-replaced"><div class="message temporary-message float-right">'+unescape(e)+"</div></li>";$("#talkMessages").append(t),$("div.chat-history").scrollTop($("div.chat-history").prop("scrollHeight"))}})),(n=$.ajax({method:"post",url:t,data:r})).done((function(e){"success"==e.status&&($("#to-be-replaced").replaceWith(e.html),$("div.chat-history").scrollTop($("div.chat-history").prop("scrollHeight")),$("#user-"+e.receiver_id).length&&$("#user-"+e.receiver_id).remove(),$("#people-list .list").prepend(e.html2),$(".talkDeleteConversation").on("submit",(function(e){confirm(deleteConvo)||e.preventDefault()})),$(".talkBlockConversation").on("submit",(function(e){confirm(blockConvo)||e.preventDefault()})))})),n.fail((function(e){"blocked-user"==e.responseJSON.status&&(alert(e.responseJSON.msg),$("#to-be-replaced").remove())}))})),$("body").on("click",".talkDeleteMessage",(function(e){var t,o,r;if(e.preventDefault(),t=$(this),r=t.data("message-id"),o=__baseUrl+"/ajax/message/delete/"+r,!confirm(deleteMessage))return!1;$.ajax({method:"post",url:o,data:{_method:"DELETE"}}).done((function(e){"success"==e.status&&$("#message-"+r).hide(500,(function(){$(this).remove()}))}))})),$(".talkDeleteConversation").on("submit",(function(e){confirm(deleteConvo)||e.preventDefault()})),$(".talkBlockConversation").on("submit",(function(e){confirm(blockConvo)||e.preventDefault()}))}))}});